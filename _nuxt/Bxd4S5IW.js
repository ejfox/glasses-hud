import{J as E,K as P,s as W,k as N,L as q,M as z,_ as I,r as m,o as V,N as G,x as h,z as l,O as C,P as S,Q as R,D as O,A as y,y as v,R as x,S as $}from"./BAvX5N9d.js";function U(M){return E()?(P(M),!0):!1}const X=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const j=X?window:void 0;function H(M,_={}){const{immediate:p=!0,fpsLimit:c=void 0,window:s=j,once:T=!1}=_,r=W(!1),g=N(()=>c?1e3/z(c):null);let d=0,n=null;function o(f){if(!r.value||!s)return;d||(d=f);const b=f-d;if(g.value&&b<g.value){n=s.requestAnimationFrame(o);return}if(d=f,M({delta:b,timestamp:f}),T){r.value=!1,n=null;return}n=s.requestAnimationFrame(o)}function a(){!r.value&&s&&(r.value=!0,d=0,n=s.requestAnimationFrame(o))}function k(){r.value=!1,n!=null&&s&&(s.cancelAnimationFrame(n),n=null)}return p&&a(),U(k),{isActive:q(r),pause:k,resume:a}}const J={class:"container"},K={class:"glasses-area"},Q={class:"instruction"},Y={class:"palette"},Z=["onClick"],ee={class:"icon"},te={class:"label"},ae={__name:"index",setup(M){const _=[{id:"bearing",icon:"ðŸ§­",label:"BEAR"},{id:"heartRate",icon:"â¤ï¸",label:"HR"},{id:"steps",icon:"ðŸ‘Ÿ",label:"STEP"},{id:"temperature",icon:"ðŸŒ¡ï¸",label:"TEMP"},{id:"altitude",icon:"â›°ï¸",label:"ALT"},{id:"time",icon:"ðŸ•",label:"TIME"},{id:"battery",icon:"ðŸ”‹",label:"BATT"}],p=m("bearing"),c=m([]),s=m([]);let T=0;const r=m(null),g=m(null);class d{constructor(){this.permutation=[];for(let e=0;e<256;e++)this.permutation[e]=e;for(let e=255;e>0;e--){const t=Math.floor(Math.random()*(e+1));[this.permutation[e],this.permutation[t]]=[this.permutation[t],this.permutation[e]]}this.permutation=[...this.permutation,...this.permutation]}fade(e){return e*e*e*(e*(e*6-15)+10)}lerp(e,t,u){return t+e*(u-t)}grad(e,t){return(e&1)===0?t:-t}noise(e){const t=Math.floor(e)&255;e-=Math.floor(e);const u=this.fade(e);return this.lerp(u,this.grad(this.permutation[t],e),this.grad(this.permutation[t+1],e-1))}}const n=new d;let o=0;const a=m({bearing:0,heartRate:72,steps:4521,temperature:21.5,altitude:142,battery:85}),k=i=>{const e=_.find(t=>t.id===i);return e?e.label:i},f=i=>{switch(i.type){case"bearing":return`${a.value.bearing}Â°`;case"heartRate":return`${a.value.heartRate} BPM`;case"steps":return`${a.value.steps}`;case"temperature":return`${a.value.temperature}Â°C`;case"altitude":return`${a.value.altitude}m`;case"time":return new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});case"battery":return`${a.value.battery}%`;default:return i.type}},b=(i,e)=>{const t=e==="left"?r.value:g.value;if(!t)return;const u=t.getBoundingClientRect(),B=(i.clientX-u.left)/u.width*100,w=(i.clientY-u.top)/u.height*100,A={id:++T,type:p.value,x:Math.max(5,Math.min(85,B)),y:Math.max(5,Math.min(85,w)),flash:!0};setTimeout(()=>{A.flash=!1},300),e==="left"?c.value=[...c.value,A]:s.value=[...s.value,A]},D=()=>{c.value=[],s.value=[]},F=()=>{o+=.01,a.value.bearing=Math.floor((n.noise(o*.3)+1)/2*360),a.value.heartRate=Math.floor((n.noise(o*.2+100)+1)/2*40+60),Math.random()<.05&&(a.value.steps+=Math.floor(Math.random()*3)),a.value.temperature=((n.noise(o*.05+200)+1)/2*7+18).toFixed(1),a.value.altitude=Math.floor((n.noise(o*.02+300)+1)/2*500),a.value.battery=Math.max(0,Math.min(100,85+Math.floor(n.noise(o*.01+400)*5)))};let L=null;return V(()=>{const{pause:i}=H(()=>F());L=i}),G(()=>{L&&L()}),(i,e)=>(v(),h("div",J,[l("div",K,[l("div",{class:"lens",ref_key:"leftLensRef",ref:r,onClick:e[0]||(e[0]=t=>b(t,"left"))},[(v(!0),h(C,null,S(R(c),t=>(v(),h("div",{key:t.id,class:$(["widget",{flash:t.flash}]),style:x(`left: ${t.x}%; top: ${t.y}%;`)},y(f(t)),7))),128))],512),e[2]||(e[2]=l("div",{class:"bridge"},null,-1)),l("div",{class:"lens",ref_key:"rightLensRef",ref:g,onClick:e[1]||(e[1]=t=>b(t,"right"))},[(v(!0),h(C,null,S(R(s),t=>(v(),h("div",{key:t.id,class:$(["widget",{flash:t.flash}]),style:x(`left: ${t.x}%; top: ${t.y}%;`)},y(f(t)),7))),128))],512)]),l("p",Q,[e[3]||(e[3]=O("Tap lens to place ",-1)),l("strong",null,y(k(R(p))),1)]),l("div",Y,[(v(),h(C,null,S(_,t=>l("button",{key:t.id,class:$({selected:R(p)===t.id}),onClick:u=>p.value=t.id},[l("span",ee,y(t.icon),1),l("span",te,y(t.label),1)],10,Z)),64))]),l("button",{class:"clear-btn",onClick:D},"CLEAR ALL")]))}},se=I(ae,[["__scopeId","data-v-b659007c"]]);export{se as default};
